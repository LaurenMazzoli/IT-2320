define("kandlcommon/common",[],function(){"use strict";function e(){}return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{windowWidth:function(){return Math.max(this.documentElementWidth(),this.windowInnerWidth()||0)},documentElementWidth:function(){return document.documentElement.clientWidth},windowInnerWidth:function(){return window.innerWidth},isMobile:function(){return this.windowWidth()<=599},isMobilePortrait:function(){return this.windowWidth()<=399},isMobileLandscape:function(){return this.windowWidth()>399&&this.windowWidth()<=599},isTablet:function(){return this.windowWidth()>599&&this.windowWidth()<=1007},isDesktop:function(){return this.windowWidth()>1007},isIE:function(){return document.documentMode?document.documentMode:!1},cutsMustard:function(){return"querySelector"in document&&"localStorage"in window&&"addEventListener"in window},addClass:function(e,t){if(e&&t){if(e.classList)return e.classList.add(t);if(!this.hasClass(e,t)){var n=e.className;n+=" "+t,e.className=n.trim()}}},classList:function(e){return e&&e.classList?e.classList:e.attributes["class"].value.split(" ")},hasClass:function(e,t){if(e&&t){var n=new RegExp("(?:^| |\n)("+t+")(?: |$|\n)");return n.test(e.className)}},removeClass:function(e,t){if(e&&t){if(e.classList)return e.classList.remove(t);e.className=e.className.replace(t,"")}},toggleClass:function(e,t){if(e&&t){if(e.classList)return e.classList.toggle(t);this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}},mapDomNodeList:function(e,t){var n,r;for(n=0,r=e.length;n<r;n+=1)t(e[n])},addEvents:function(e,t,n){for(var r=0;r<e.length;r++)this.addEvent(e[r],t,n)},addEvent:function(e,t,n){n||(n=window),n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t)},removeEvent:function(e,t,n){n||(n=window),n.removeEventListener?n.removeEventListener(e,t,!1):n.detachEvent&&n.detachEvent("on"+e,t)},fireEvent:function(e,t,n){n||(n=window);if(document.createEvent){var r=document.createEvent("Event");r.initEvent(e,!1,!1);if(typeof t=="object")for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);n.dispatchEvent(r)}},getElementPosition:function(e){var t=0,n=0,r=e.offsetHeight,i=e.offsetWidth;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;while(e);return{top:n,left:t,bottom:n+r,right:t+i}},getScrollY:function(){return window.scrollY||window.pageYOffset},getStyleProperty:function(e,t){if(!window.getComputedStyle){var n="",r=!1;for(var i=0;i<t.length;i++)t[i]==="-"?r=!0:r?(n+=t[i].toUpperCase(),r=!1):n+=t[i];return e.currentStyle[n]}return window.getComputedStyle(e).getPropertyValue(t)},mergeConfig:function(e,t){var n={},r;for(r in e)n[r]=e[r];if(typeof t!="undefined")for(r in t)n[r]=t[r];return n},extend:function(t,n){e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n},forceOnTopOfMediaPlayer:function(e){var t=document.createElement("iframe");t.className="iframeshim",t.setAttribute("frameborder",0),t.setAttribute("scrolling","no"),t.setAttribute("allowTransparency","true"),t.setAttribute("tabindex",-1),t.setAttribute("src",'javascript:""'),e.appendChild(t)},collectionHas:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},findParentBySelector:function(e,t){var n=document.querySelectorAll(t),r=e.parentNode;while(r&&!this.collectionHas(n,r))r=r.parentNode;return r},getHtmlTag:function(){return document.getElementsByTagName("html")[0]},css3TransitionsSupported:function(){var e=!1,t="Webkit Moz O ms Khtml".split(" "),n=document.createElement("div");if(n.style.animationName)return!0;for(var r=0;r<t.length;r++)if(n.style[t[r]+"AnimationName"]!==undefined){e=!0;break}return e}}}),define("glossaryTerms",["kandlcommon/common"],function(e){"use strict";return{_inlineLinks:null,_panelContainer:null,_panelTerm:null,_panelDescription:null,_panelGlossaryLink:null,_panelArrowUp:null,_panelArrowDown:null,_panelClose:null,container:null,init:function(e){this.container=e,this._inlineLinks=this.container.querySelectorAll(".c-rg-gt-1-inline"),this._inlineLinks.length>0&&(this.setPanelElements(),this.addListeners())},broadcastEvent:function(e,t){var n;this.container.createEvent?(n=this.container.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):this.container.createEventObject&&(n=this.container.createEventObject(),n.eventType=t),n.eventName=t,e.dispatchEvent(n)},setPanelElements:function(){this._panelContainer=this.container.querySelector("#c-rg-gt-1-popup"),this._panelTerm=this._panelContainer.querySelector(".c-rg-gt-1-term"),this._panelDescription=this._panelContainer.querySelector(".c-rg-gt-1-desc"),this._panelGlossaryLinkContainer=this._panelContainer.querySelector(".c-rg-gt-1-link"),this._panelGlossaryLink=this._panelContainer.querySelector(".c-rg-gt-1-link a"),this._panelArrowUp=this._panelContainer.querySelector(".c-rg-gt-1-arrow-up"),this._panelArrowDown=this._panelContainer.querySelector(".c-rg-gt-1-arrow-down"),this._panelClose=this._panelContainer.querySelector(".c-rg-gt-1-close")},addListeners:function(){var t=this,n=this._inlineLinks.length;for(var r=0;r<n;r++)e.addEvent("click",function(n){n.stopPropagation(),n.preventDefault(),e.hasClass(this,"c-rg-gt-1-link-active")?(t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents()):(t.hidePanel(),t.toggleGlossaryTermActive(this),t.setPanelContents(this),t.showPanel(),t.setPanelPosition(this))},this._inlineLinks[r]);e.addEvent("resize",function(){t.resizeGlossaryPanelIfActive()},window),e.addEvent("orientationchange",function(){t.resizeGlossaryPanelIfActive()},window),e.addEvent("keypress",function(e){e=e||window.event,e.keyCode===27&&(t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents())},window),e.addEvent("click",function(e){e.stopPropagation()},this._panelContainer),e.addEvent("click",function(n){n.stopPropagation(),e.hasClass(t._panelContainer,"k-is-hidden")||(t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents())},this.container.querySelector(".k-main")),e.addEvent("click",function(){e.hasClass(t._panelContainer,"k-is-hidden")||(t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents())},window),e.addEvent("click",function(e){e.stopPropagation(),t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents()},this._panelClose),e.addEvent("click",function(e){e.stopPropagation(),t.hidePanel(),t.toggleGlossaryTermActive(),t.setPanelContents(),t.broadcastEvent(t.container.querySelector("#glossary"),"glossary-focus")},this._panelGlossaryLink)},resizeGlossaryPanelIfActive:function(){this.container.querySelector(".c-rg-gt-1-link-active")!==null&&this.setPanelPosition()},setPanelContents:function(t){var n="Sorry",r="Not currently available.",i,s;typeof t!="undefined"&&(i=this.container.querySelector(t.hash+" .c-rg-lg-1-term"),i!==null?n=i.innerHTML:e.addClass(this._panelGlossaryLinkContainer,"k-is-hidden"),s=this.container.querySelector(t.hash+" .c-rg-lg-1-desc"),s!==null&&(r=s.innerHTML)),this._panelTerm.innerHTML=n,this._panelDescription.innerHTML=r},hidePanel:function(){e.addClass(this._panelContainer,"k-is-hidden"),this._panelContainer.removeAttribute("style"),this._panelContainer.setAttribute("role","presentation"),this._panelContainer.setAttribute("aria-hidden","true"),this._panelGlossaryLink.setAttribute("tabindex","-1"),this._panelClose.setAttribute("tabindex","-1")},showPanel:function(){e.removeClass(this._panelContainer,"k-is-hidden"),this._panelContainer.removeAttribute("role"),this._panelContainer.removeAttribute("aria-hidden"),this._panelGlossaryLink.removeAttribute("tabindex"),this._panelClose.removeAttribute("tabindex")},toggleGlossaryTermActive:function(t){var n=this._inlineLinks.length,r=0;for(r=0;r<n;r++)typeof t!="undefined"&&this._inlineLinks[r]===t?e.addClass(this._inlineLinks[r],"c-rg-gt-1-link-active"):e.removeClass(this._inlineLinks[r],"c-rg-gt-1-link-active")},setPanelPosition:function(){var t,n=window.pageYOffset,r=this.container.querySelector(".c-rg-gt-1-link-active"),i=e.getElementPosition(r),s=this.getSize(r),o=this.getSize(this._panelContainer),u=window.innerWidth-this.getMargin()*2,a=window.innerHeight-this.getMargin()*2,f=i.left+s.width/2,l=f-o.width/2;l>this.getMargin()?(this._panelContainer.style.left=l+"px",t=0):(this._panelContainer.style.left=this.getMargin()+"px",t=f),o.width>=u?this._panelContainer.style.right=this.getMargin()+"px":this._panelContainer.style.right="auto",this._panelContainer.style.top=i.bottom+"px",this.showArrow("up",t),n+a<e.getElementPosition(r).bottom+o.height&&(this._panelContainer.style.top=i.top-o.height+"px",this.showArrow("down",t))},showArrow:function(e,t){var n=t>0?t-this.getMargin()+"px":"50%";e==="up"?(this._panelArrowUp.style.display="block",this._panelArrowUp.style.left=n,this._panelArrowDown.style.display="none"):(this._panelArrowUp.style.display="none",this._panelArrowDown.style.display="block",this._panelArrowDown.style.left=n)},getSize:function(e){var t=e===null||e.offsetWidth<=0||e.offsetWidth===null?0:e.offsetWidth,n=e===null||e.offsetHeight<=0||e.offsetHeight===null?0:e.offsetHeight;return{width:t,height:n}},getMargin:function(){return e.isMobile()&&e.windowWidth()<=320?8:16}}}),define("glossary",["kandlcommon/common"],function(e){"use strict";return{container:null,header:null,list:null,terms:null,ids:[],arrow:null,isMobile:e.isMobile,isTablet:e.isTablet,isDesktop:e.isDesktop,init:function(){if(e.cutsMustard()&&document.querySelectorAll(".c-rg-lg-1").length===1){this.container=document.querySelector(".c-rg-lg-1"),this.header=document.querySelector(".c-rg-lg-1 header div"),this.list=document.querySelector(".c-rg-lg-1 ol"),this.arrow=document.querySelector(".c-rg-lg-1 .k-icon"),this.terms=document.querySelectorAll(".c-rg-lg-1-term"),this.container!==null&&(this.terms.length>1&&this.hideList(),this.terms.length>0&&e.addEvent("click",function(){this.toggleList()}.bind(this),this.header));var t=this.terms.length;for(var n=0;n<t;n++)this.ids.push("#"+this.terms[n].getAttribute("id"));e.addEvent("glossary-focus",function(){this.inlineGlossaryTrigger()}.bind(this),this.container)}},inlineGlossaryTrigger:function(){e.hasClass(this.container,"k-is-active")||(e.addClass(this.container,"k-is-active"),this.showList())},toggleList:function(){e.toggleClass(this.container,"k-is-active"),e.hasClass(this.container,"k-is-active")?this.showList():this.hideList()},showList:function(){this.header.setAttribute("title",this.header.getAttribute("data-hide")),e.removeClass(this.arrow,"k-icon-arrow-left"),e.addClass(this.arrow,"k-icon-arrow-down"),this.list.style.display="block"},hideList:function(){this.header.setAttribute("title",this.header.getAttribute("data-reveal")),e.removeClass(this.arrow,"k-icon-arrow-down"),e.addClass(this.arrow,"k-icon-arrow-left"),this.list.style.display="none"}}}),define("miniaudio-dom",["kandlcommon/common"],function(e){"use strict";return{classes:{loading:"c-mini-audio-icon-loading",notActive:"c-mini-audio-icon-not-active",playing:"c-mini-audio-icon-playing",errorState:"k-in-error-state",noFlashErrorState:"c-missing-flash"},setErrorState:function(t){var n=t.parentNode.parentNode;e.addClass(n,this.classes.errorState)},setButtonInitialising:function(t){e.addClass(t,this.classes.loading),e.removeClass(t,this.classes.notActive)},setButtonInactive:function(t){e.addClass(t,this.classes.notActive),e.removeClass(t,this.classes.loading)},setButtonPlaying:function(t){e.addClass(t,this.classes.playing),e.removeClass(t,this.classes.loading)},setButtonStopped:function(t){e.addClass(t,this.classes.notActive),e.removeClass(t,this.classes.playing)},resetAllButtons:function(t){var n=0,r=t.querySelectorAll(".c-mini-audio-icon");for(n=0;n<r.length;n++)e.addClass(r[n],this.classes.notActive),e.removeClass(r[n],this.classes.loading),e.removeClass(r[n],this.classes.playing)},getPid:function(e){return e.getAttribute("data-src-pid")},getVPid:function(e){return e.getAttribute("data-vpid")},addMediaPlayerContainer:function(e){var t=document.createElement("div");t.setAttribute("id","mini-audio-media-player"),e.querySelector("#k-curriculum-content").appendChild(t)},isLoading:function(t){return e.hasClass(t,this.classes.loading)},isPlaying:function(t){return e.hasClass(t,this.classes.playing)},isErroring:function(t){var n=t.parentNode.parentNode;return e.hasClass(n,this.classes.errorState)||e.hasClass(n,this.classes.noFlashErrorState)},noFlashErrorState:function(t){var n=t.querySelectorAll(".c-mini-audio-container"),r=0;for(r=0;r<n.length;r++)e.addClass(n[r],this.classes.noFlashErrorState)}}}),define("playlist-generator",[],function(){"use strict";return{generate:function(e,t){return e===""?"http://www.bbc.co.uk/iplayer/playlist/"+t:{items:[{vpid:e}]}}}}),define("miniaudio-controller",["bump-3","kandlcommon/common","miniaudio-dom","playlist-generator"],function(e,t,n,r){"use strict";return{playerSettings:{product:"iplayer",playerProfile:"smp",disable3GWarning:!0,mediator:{host:"open.live.bbc.co.uk"},responsive:!0},container:null,mediaPlayer:null,currentPlayingElement:null,init:function(t){var i=t.querySelector(".c-mini-audio-container"),s,o;this.container=t,i!==null&&(n.addMediaPlayerContainer(this.container),this.mediaPlayer=e("#mini-audio-media-player").player(this.playerSettings),o=t.querySelector(".c-mini-audio-icon"),s=r.generate(n.getVPid(o),n.getPid(o)),this.mediaPlayer.load(),this.mediaPlayer.loadPlaylist(s),this.mediaPlayer.bind("initialised",this.mediaPlayerInitialised.bind(this)),this.mediaPlayer.bind("playing",this.playing.bind(this)),this.mediaPlayer.bind("playlistEnded",this.stopped.bind(this)),this.mediaPlayer.bind("pause",this.stopped.bind(this)),this.mediaPlayer.bind("error",this.error.bind(this)))},mediaPlayerInitialised:function(){var e=this.container.querySelectorAll(".c-mini-audio-icon"),n=0;for(n=0;n<e.length;n++)t.addEvent("click",this.load.bind(this),e[n])},load:function(e){var t=e.target,i,s;if(n.isErroring(t))return;n.isPlaying(t)?this.mediaPlayer.suspend():n.isLoading(t)||(i=n.getVPid(t),s=n.getPid(t),n.resetAllButtons(this.container),this.mediaPlayer.deviceData().device.os.android||n.setButtonInitialising(t),this.currentPlayingElement=t,this.mediaPlayer.loadPlaylist(r.generate(i,s),{autoplay:!0}))},playing:function(){this.hasPlayingElement()&&n.setButtonPlaying(this.currentPlayingElement)},stopped:function(){this.hasPlayingElement()&&n.setButtonStopped(this.currentPlayingElement)},error:function(e){e.errorData.code()===6010?n.noFlashErrorState(this.container):this.hasPlayingElement()&&(n.setErrorState(this.currentPlayingElement),this.currentPlayingElement=null)},hasPlayingElement:function(){return this.currentPlayingElement!==null}}}),define("study-guide-navigation",["kandlcommon/common"],function(e){"use strict";function r(e){return e+"px"}function i(t,n){e.removeClass(t,n),t.style.position="",t.style.top="",t.style.width="",t.style.zIndex=""}function s(t,n){e.addClass(t,n),t.style.position="fixed",t.style.top="0",t.style.width="100%",t.style.zIndex="2147483601"}function o(t){return!e.isTablet()&&t>645?645:t}var t,n={};return n.init=function(r,o,u,a){function v(){f===!1&&(f=!0,setTimeout(function(){n.applyScroll(window.pageYOffset,r,l,o,u,a),f=!1},10))}function m(){i(r,o),d=!0,setTimeout(function(){n.applyScroll(window.pageYOffset,r,l,o,u,a),f=!1},500)}function g(){window.pageYOffset>l.offsetTop+l.offsetHeight?s(r,o):i(r,o)}function y(){var t,n;t=r.querySelectorAll(".c-studyguide-navigation-tab-inner"),b(t);for(var i=0;i<t.length;i++)n||(n=t[i].parentNode.clientHeight,n-=parseInt(e.getStyleProperty(t[i],"padding-bottom")),n-=parseInt(e.getStyleProperty(t[i],"padding-top"))),t[i].style.height=n+"px"}function b(e){for(var t=0;t<e.length;t++)e[t].style.height="auto"}if(r===null)return null;var f=!1,l,c,h,p="fixed-position-container",d=!1;l=document.createElement("div"),r.parentNode.insertBefore(l,r),l.appendChild(r),l.id=p,t=l.offsetTop,e.addEvent("click",v,document.getElementsByClassName("k-nav-1")),document.addEventListener("navLoaded",function(){v()},!1),h={resize:v,scroll:v,touch:m,touchmove:m,touchleave:g};for(c in h)h.hasOwnProperty(c)&&e.addEvent(c,h[c],!1);e.addEvent("resize",y,!1),y(),v()},n.applyScroll=function(e,t,n,u,a,f){var l,c,h=n.offsetTop;a?f||(c=a.offsetTop+a.offsetHeight):a=undefined,e>h?(l=e+t.offsetHeight,a!==undefined&&l>c?i(t,u):s(t,u),t.style.width=r(o(n.offsetWidth)),n.style.height=r(t.offsetHeight)):i(t,u)},n}),define("qa",["kandlcommon/common"],function(e){"use strict";return{init:function(t){var n,r;if(this.hasQuestionAnswers(t)){n=t.querySelectorAll(".k-answer-link");for(r=0;r<n.length;r++)e.addEvent("click",this.toggleAnswer.bind(this),n[r])}},toggleAnswer:function(t){var n=t.currentTarget,r=n.parentNode.parentNode,i=n.querySelector(".k-icon");t.preventDefault(),e.toggleClass(r,"k-qa-active"),e.toggleClass(i,"k-icon-arrow-left"),e.toggleClass(i,"k-icon-arrow-down")},hasQuestionAnswers:function(e){return e.querySelectorAll(".k-rg-qa").length>0}}}),define("kandlcommon/responsiveImage",["kandlcommon/common"],function(e){"use strict";function r(){return e.isMobile()?"mobile":e.isTablet()?"tablet":"desktop"}try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var n=function(e,t){this.recipe=t.recipe,this.sizes=t.sizes,t.bestFitAlgorithm&&typeof t.bestFitAlgorithm=="function"?this.bestFitAlgorithm=t.bestFitAlgorithm:this.bestFitAlgorithm=this.nearestMatchingRecipe,t.backgroundImage?(this.imageElem=new Image,this.backgroundImage=e):this.imageElem=e,this.container=t.container||e};return n.prototype.init=function(){var t=this;this.handleResize(),this.resizeFunction=function(){t.handleResize()},this.currentWidth=undefined,e.addEvent("load",this.resizeFunction),e.addEvent("resize",this.resizeFunction),e.addEvent("update_recipe",this.resizeFunction,this.imageElem)},n.prototype.destroy=function(){e.removeEvent("load",this.resizeFunction),e.removeEvent("resize",this.resizeFunction),e.removeEvent("update_recipe",this.resizeFunction,this.imageElem)},n.prototype.isElementVisible=function(){if(this.backgroundImage){if(this.backgroundImage.offsetParent===null)return!1}else if(this.imageElem.offsetParent===null)return!1;return!0},n.prototype.handleResize=function(){if(!this.isElementVisible())return;var e=this.getBestRecipeFit();if(e!==null){var t=this.recipe.replace("$recipe",e);this.imageElem.src!==t&&(this.imageElem.src=t,this.backgroundImage&&(this.backgroundImage.style.backgroundImage='url("'+t+'")'))}},n.prototype.getBestRecipeFit=function(){var e=this.container.clientWidth,t=this.container.clientHeight;return e===this.currentWidth&&t===this.currentHeight?null:(this.currentWidth=e,this.currentHeight=t,this.bestFitAlgorithm())},n.prototype.nearestMatchingRecipe=function(){return this.findNearestMatchingRecipe(this.sizes)},n.prototype.nearestMatchingRatioRecipe=function(){return this.currentWidth<this.currentHeight?this.findNearestMatchingRecipe(this.sizes.portrait):this.findNearestMatchingRecipe(this.sizes.landscape)},n.prototype.findNearestMatchingRecipe=function(e){var t,n=Infinity;for(var r in e)if(e.hasOwnProperty(r)){var i=Math.abs(this.currentWidth-r);i<n&&(t=e[r],n=i)}return t},n.prototype.isMinimumBelowCurrent=function(e,t,n){return e>t&&e<=n},n.prototype.isMinimumAvailable=function(e,t,n){return e>n&&(e<t||t===-Infinity)},n.prototype.minimumMatchingRecipe=function(){var e,t,n=-Infinity;for(var r in this.sizes)if(this.sizes.hasOwnProperty(r)){e=parseInt(r);if(this.isMinimumBelowCurrent(e,n,this.currentWidth)||this.isMinimumAvailable(e,n,this.currentWidth))n=e,t=this.sizes[n]}return t},n.prototype.deviceMatchingRecipe=function(){return this.sizes[r()]},n}),define("kandl/mediaPlayer/i18n/mediaPlayer",[],function(){"use strict";return{en:{failedLoad:"This content has failed to load. Please check your internet connection and try again.",noFlash:'You need to have Flash to play this content. You can get it from <a href="http://www.adobe.com/go/getflashplayer">here</a>.',play:"Play"},cy:{failedLoad:"Dyw'r chwaraewr fideo ddim wedi llwytho. Ydi'r cysylltiad â'r we yn gweithio'n iawn?",noFlash:"Mae'n rhaid cael Flash er mwyn chwarae'r fideo yma. Gallwch ei gael <a href=\"http://www.adobe.com/go/getflashplayer\">yma</a>.",play:"Dechrau"},ga:{failedLoad:"Theip ar lódáil an tseinnteora físe. Seiceáil do cheangal idirlín agus triail arís é le do thoil.",noFlash:'Tá Flash de dhíth ort leis an fhíseán seo a sheinm. Is féidir theacht air <a href="http://www.adobe.com/go/getflashplayer">anseo</a>.',play:"Tosaigh"},gd:{failedLoad:"Cha do luchdaich do chluicheadair bhidio. Thoir sùil air do cheangal lìn agus feuch a-rithist.",noFlash:'Feumaidh tu Flash airson am bhidio seo a chluich. Gheibhear <a href="http://www.adobe.com/go/getflashplayer">an seo e</a>.',play:"Tòisich"}}}),define("kandl/mediaPlayer/mediaPlayer",["kandlcommon/common","kandlcommon/responsiveImage","kandl/mediaPlayer/i18n/mediaPlayer"],function(e,t,n){"use strict";function i(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return e[0]==="#"?e.length===7?e:e.length===4?s(e):"#ffffff":(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/),e===null?"#ffffff":"#"+t(e[1])+t(e[2])+t(e[3]))}function s(e){var t=e.replace("#",""),n=t[0],r=t[1],i=t[2];return"#"+n+n+r+r+i+i}function o(e,t){return function(){t.apply(e,arguments)}}function u(t){var n=document.createElement("button");e.addClass(n,"button"),t.container.appendChild(n);var r=i(e.getStyleProperty(n,"color"));return r}function a(){var e="",t;return this.responsiveImage?e=this.responsiveImage.recipe:(t=this.container.getAttribute("data-poster-template"),t&&(e=t)),e.replace("$recipe","{recipe}")}function f(e){var t=e.querySelector(".emp-fallback");t!==null&&t.parentNode.removeChild(t)}var r={createPlaceholder:!0,mediaBaseUrl:"http://www.bbc.co.uk/iplayer/playlist/",overrideCta:!1,posterSizes:{640:"640x360"},language:"en",embed:!1,superResponsive:!0,ui:{foreColour:"#333333"}},l=function(t,n){this.container=t,this.configuration=e.mergeConfig(r,n),this.bindQueue=[],this.bumpPlayer=null,this.inFullScreen=!1,this.configuration.guidance=this.container.getAttribute("data-guidance"),f(t)};return l.prototype.destroy=function(){e.removeEvent("load",this.scrollHandler),e.removeEvent("scroll",this.scrollHandler),e.removeEvent("resize",this.scrollHandler)},l.prototype.delayEmbed=function(){this.load(!1,!0)},l.prototype.activate=function(e){this.load(e,!1)},l.prototype.load=function(t,n){var r=this;if(this.bumpPlayer!==null)return;require(["bump-3"],function(i){var s=r.container.getAttribute("data-version-pid"),f=u(r),l={product:"sport",mediaProfile:"pc",autoplay:t,delayEmbed:n,responsive:!0,superResponsive:r.configuration.superResponsive,ui:{colour:f,embed:{enabled:r.configuration.embed},foreColour:r.configuration.ui.foreColour,hideDefaultErrors:!0,touchScroll:{enabled:!0},locale:{lang:r.configuration.language}},playlistObject:{guidance:r.configuration.guidance,items:[{kind:r.configuration.kind,vpid:s}]}},c;l.overrideHoldingImage=l.playlistObject.holdingImageUrl=a.call(r),r.configuration.overrideCta&&(l.ui.cta={enabled:!0,custom:r.configuration.overrideCta}),r.configuration.insideIframe!==undefined&&(l.insideIframe=r.configuration.insideIframe),r.configuration.enableFullscreen&&(l.ui.fullscreen={enabled:!0}),r.configuration.ui.CTAcss&&(l.ui.CTAcss=r.configuration.ui.CTAcss);var h=r.configuration.daxComscore;h&&(l.appName=h.appName,l.appType=h.appType,l.counterName=h.counterName),r.bumpPlayer=i(r.container).player(l),c=r.container.getAttribute("data-poster-template"),c!==null&&r.bumpPlayer.poster(c.replace("$recipe","640x360")),r.bumpPlayer.bind("error",function(e){r.playerError(e)}),r.bumpPlayer.bind("touchScroll",function(e){r.touchScroll(e)}),r.bumpPlayer.bind("fullscreenEnter",function(){r.configuration.fullscreenEnter!==undefined&&r.configuration.fullscreenEnter(),r.inFullScreen=!0}),r.bumpPlayer.bind("fullscreenExit",function(){r.configuration.fullscreenExit!==undefined&&r.configuration.fullscreenExit(),r.inFullScreen=!1});for(var p=0;p<r.bindQueue.length;p++)r.bumpPlayer.bind(r.bindQueue[p].event,o(r,r.bindQueue[p].callback));r.bumpPlayer.load(),e.addClass(r.container,"playing"),r.responsiveImage!==undefined&&r.responsiveImage.destroy(),e.fireEvent("media_playing",{mediaPlayer:r})},function(){var e="<p>"+r.getI18n("failedLoad")+"</p>";r.error(e,"bump-failed","emp__container--bump-failed")})},l.prototype.getI18n=function(e){return n[this.configuration.language][e]},l.prototype.touchScroll=function(e){this.inFullScreen||window.scrollBy(0,e.eventData)},l.prototype.error=function(t,n,r){var i=document.createElement("div");i.className=n+" emp-fallback",i.innerHTML=t,this.container.appendChild(i),e.addClass(this.container,r)},l.prototype.noFlash=function(){var e='<p class="emp__message--no-flash">'+this.getI18n("noFlash")+"</p>";this.error(e,"no-flash","emp__container--no-flash")},l.prototype.playerError=function(e){e.errorData.code()===6010&&this.noFlash()},l.prototype.bind=function(e,t){this.bumpPlayer===null?this.bindQueue.push({event:e,callback:t}):this.bumpPlayer.bind(e,o(this,t))},l}),define("media-controller",["kandl/mediaPlayer/mediaPlayer"],function(e){"use strict";return{init:function(t){var n=t.querySelectorAll(".audio .emp"),r=t.querySelectorAll(".video .emp"),i=0,s,o="en-GB",u,a,f=document.querySelector("html").lang;f!==""&&(o=f),o=o.split("-")[0],a={ui:{foreColour:"#ffffff"},language:o};for(i=0;i<r.length;i++)s=new e(r[i],a),s.activate();u={kind:"radioProgramme",ui:{foreColour:"#ffffff"},language:o,superResponsive:!1};for(i=0;i<n.length;i++)s=new e(n[i],u),s.activate()}}}),define("learning-content",["kandlcommon/common","istats-1"],function(e,t){"use strict";var n=function(){return document.querySelector(".c-learning-content")},r=function(e){var t=n().querySelectorAll("."+a.header),r=n().querySelectorAll("."+a.tab),i,s;for(i=0;i<t.length;i++)if(t[i]===e)return[i];for(s=0;s<r.length;s++)if(r[s]===e)return[s];return 0},i=function(t){var r=n().querySelectorAll("."+a.tab)[t],i=n().querySelectorAll("."+a.header)[t],s=n().querySelectorAll("."+a.panel)[t];e.addClass(r,a.tabSelected),r.querySelector(".c-learning-content__icon")&&(e.removeClass(r.querySelector(".c-learning-content__icon"),"k-icon-arrow-left-active"),e.addClass(r.querySelector(".c-learning-content__icon"),"k-icon-arrow-down")),e.addClass(i,a.headerSelected),i.querySelector(".c-learning-content__icon")&&(e.removeClass(i.querySelector(".c-learning-content__icon"),"k-icon-arrow-left-active"),e.addClass(i.querySelector(".c-learning-content__icon"),"k-icon-arrow-down")),e.addClass(s,a.panelSelected)},s=function(){var t="."+a.headerSelected+","+"."+a.tabSelected+","+"."+a.panelSelected,r=n().querySelectorAll(t),i,s;for(i=0;i<r.length;i++)e.removeClass(r[i],a.headerSelected),e.removeClass(r[i],a.tabSelected),e.removeClass(r[i],a.panelSelected),s=r[i].querySelector(".k-icon"),s&&(e.removeClass(s,"k-icon-arrow-down"),e.addClass(s,"k-icon-arrow-left-active"))},o=function(){var t=n(),r=t.querySelectorAll("."+a.header),i,s;for(i=0;i<r.length;i++)r[i].querySelector(".c-learning-content__icon")||(s=document.createElement("span"),e.addClass(s,"c-learning-content__icon"),e.addClass(s,"k-icon"),e.addClass(s,"k-icon-arrow-left-active"),r[i].appendChild(s))},u=function(){var t=n(),r=t.querySelectorAll("."+a.header),i,s,o;if(!t.querySelector(".c-learning-content__tabs")){i=document.createElement("div"),e.addClass(i,"c-learning-content__tabs"),t.insertBefore(i,t.firstChild);for(s=0;s<r.length;s++)o=r[s].cloneNode(!0),o.className=o.className.replace(/__header/g,"__tabs-tab"),i.appendChild(o)}},a={header:"c-learning-content__header",headerSelected:"c-learning-content__header--selected",tab:"c-learning-content__tabs-tab",tabSelected:"c-learning-content__tabs-tab--selected",panel:"c-learning-content__panel",panelSelected:"c-learning-content__panel--selected",headerTeacher:"c-learning-content__header--teacher-notes",tabTeacher:"c-learning-content__tabs-tab--teacher-notes",headerStudent:"c-learning-content__header--student-notes",tabStudent:"c-learning-content__tabs-tab--student-notes",windowWidth:e.windowWidth,init:function(){n()&&(o(),u(),i(0),this.addSelectEvents(),e.addEvent("resize",this.addResizeEvent))},addResizeEvent:function(){var t=n().querySelectorAll("."+a.tabSelected);!e.isMobile()&&t.length===0&&i(0)},addSelectEvents:function(){var e="."+a.header+",."+a.tab,t=n().querySelectorAll(e),r;for(r=0;r<t.length;r++)t[r].addEventListener("click",this.clickHandler)},clickHandler:function(){var n=e.hasClass(this,a.headerSelected)||e.hasClass(this,a.tabSelected),o="",u;(!n||e.isMobile())&&s(),n||(u=r(this),i(u));if(e.hasClass(this,a.headerTeacher)||e.hasClass(this,a.tabTeacher))o="teacher";if(e.hasClass(this,a.headerStudent)||e.hasClass(this,a.tabStudent))o="student";t.log("open",o+"_notes")}};return a}),define("source-code-format",[],function(){"use strict";var e={init:function(){this.fixTabSpacing()},fixTabSpacing:function(){function r(t){for(var n=0;n<t.length;n++)t[n].innerHTML=t[n].innerHTML.replace(/\t/g,i(" ",e))}function i(e,t){var n="";while(--t>=0)n+=e;return n}var e=4,t=document.getElementsByTagName("code"),n=document.createElement("i");n.style.tabSize!==""&&n.style.MozTabSize!==""&&n.style.oTabSize!==""&&r(t)}};return e}),define("slide",[],function(){"use strict";var e=function(e,t){var n=this;this.image=new Image,this.imageLoaded=!1,this.indicatorNode=t,this.imageValues={indicatorTitle:this.indicatorNode.attributes.title.value,imageTitle:this.indicatorNode.attributes["data-title"].value,credit:this.indicatorNode.attributes["data-credit"].value,source:this.indicatorNode.attributes["data-source"].value,caption:this.indicatorNode.attributes["data-caption"].value,alt:this.indicatorNode.attributes["data-alt"].value,number:this.indicatorNode.attributes["data-slide-number"].value},function(t){t.indicatorNode.attributes["data-bam"]?(t.imageTypeClass="c-rg-ss-igfx-img",t.imageValues.bam=t.indicatorNode.attributes["data-bam"].value,t.imageSources=function(t){return{mobile:t.indicatorNode.attributes["data-src-m"].value,smartphone:t.indicatorNode.attributes["data-src-m"].value,tablet:t.indicatorNode.attributes["data-src-t"].value,desktop:t.indicatorNode.attributes["data-src-d"].value}}(t)):(t.imageTypeClass="c-rg-ss-img",t.imageValues.pid=t.indicatorNode.attributes["data-pid"].value,t.imageSources=function(t){var n="http://ichef.bbci.co.uk/images/ic/",r=t.imageValues.pid,i=".jpg";return{mobile:n+"320xn/"+r+i,smartphone:n+"592xn/"+r+i,tablet:n+"1008xn/"+r+i,desktop:n+"640xn/"+r+i}}(t))}(n)};return e.prototype.getSrcToLoad=function(e){var t=this.imageSources.mobile;this.imageResponsiveClass=e;switch(e){case"resp-s":t=this.imageSources.smartphone;break;case"resp-t":t=this.imageSources.tablet;break;case"resp-d":t=this.imageSources.desktop;break;default:}return t},e.prototype.preloadImage=function(e){var t=this,n=this.getSrcToLoad(e);this.image.src!==n&&(this.imageLoaded=!1,this.image.src=this.getSrcToLoad(e),this.image.onload=function(){t.imageLoaded=!0})},e}),define("slideshow",["slide","kandlcommon/common"],function(e,t){"use strict";var n=function(n,r){var i=this;this.isInitialised=!1,this.node=n,this.translations=r,this.baseImageNode=this.node.querySelector("img.resp"),this.eventsBlocked=!1,this.nextArrow=this.node.querySelector(".c-rg-ss-next"),this.nextArrowLink=this.node.querySelector(".c-rg-ss-next a"),this.prevArrow=this.node.querySelector(".c-rg-ss-previous"),this.prevArrowLink=this.node.querySelector(".c-rg-ss-previous a"),this.slideImageContainerNode=this.node.querySelector(".c-rg-ss-slide"),this.activeSlideNo=parseInt(this.slideImageContainerNode.attributes["data-slide-number"].value,10),this.slideCount=parseInt(this.node.attributes["data-slide-count"].value,10),this.slideIndicatorNodeList=this.node.querySelectorAll(".c-rg-ss-indicator-inner"),this.contextNode=this.node.querySelector(".c-rg-ss-context"),this.contextTextNodes={title:this.contextNode.querySelector(".c-rg-ss-title"),caption:this.contextNode.querySelector(".c-rg-ss-caption"),source:this.contextNode.querySelector(".c-rg-ss-source"),credit:this.contextNode.querySelector(".c-rg-ss-credit")},this.slides=[].map.call(i.slideIndicatorNodeList,function(t){return new e(n,t)}),function(n){function i(){n.hasNextSlide()&&n.navigate(n.activeSlideNo+1)}function s(){n.hasPreviousSlide()&&n.navigate(n.activeSlideNo-1)}var r=n.node.querySelector(".c-rg-ss-slide-container");window.addEventListener("resize",n.windowSizeChange.bind(n),!1),window.addEventListener("orientationchange",n.orientationChange.bind(n),!1),r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.toggleClass(this,"k-has-focus")},!1),r.addEventListener("mouseover",function(){t.addClass(this,"k-has-focus")},!1),r.addEventListener("mouseout",function(){t.removeClass(this,"k-has-focus")},!1),[].forEach.call(n.slideIndicatorNodeList,function(e){e.addEventListener("click",function(e){var t=parseInt(e.target.attributes["data-slide-number"].value,10);e.preventDefault(),e.stopPropagation(),n.navigate(t)},!1)}),n.prevArrowLink.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),s()},!1),n.nextArrowLink.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i()},!1)}(i)};return n.prototype.validate=function(){var e=this.slideCount>=2&&this.slideCount<=20,t=this.slideCount===this.slides.length;return e&&t},n.prototype.start=function(){this.setNavigationArrowsPosition(),this.setNavigationArrowsAppearance(),this.refreshCachedImages(),this.isInitialised=!0},n.prototype.navigate=function(e){function n(e){var t=e.slides[e.activeSlideNo-1];e.contextTextNodes.title.textContent=t.imageValues.imageTitle,e.contextTextNodes.caption.textContent=t.imageValues.caption,e.contextTextNodes.source.textContent=t.imageValues.source,t.imageValues.credit.length>0?e.contextTextNodes.credit.innerHTML='<span class="c-rg-ss-credit-label">'+e.translations.credit+"</span>: "+t.imageValues.credit:e.contextTextNodes.credit.innerHTML=""}function r(e){[].forEach.call(e.slideIndicatorNodeList,function(n){var r=parseInt(n.attributes["data-slide-number"].value,10);t.removeClass(n,"k-is-active"),r===e.activeSlideNo&&t.addClass(n,"k-is-active")},!1)}this.activeSlideNo=e,this.setVisibleSlideImage(),this.setNavigationArrowsAppearance(),n(this),r(this)},n.prototype.orientationChange=function(){this.resizeWithThrottle()},n.prototype.windowSizeChange=function(){this.resizeWithThrottle()},n.prototype.resizeWithThrottle=function(){var e=this,t=1e3;this.eventsBlocked||(this.eventsBlocked=!0,setTimeout(function(){e.resize(),e.eventsBlocked=!1},t))},n.prototype.resize=function(){this.isResponsiveImageUpdatedNeeded()&&(this.refreshCachedImages(),this.setNavigationArrowsPosition(),this.setVisibleSlideImage())},n.prototype.getResponsiveClassToCache=function(){var e;return t.isMobile()?e="resp-s":t.isTablet()?e="resp-t":t.isDesktop()?e="resp-d":e="resp",e},n.prototype.isResponsiveImageUpdatedNeeded=function(){return this.imageResponsiveClassCached!==this.getResponsiveClassToCache()},n.prototype.hasNextSlide=function(){return this.activeSlideNo!==this.slideCount},n.prototype.hasPreviousSlide=function(){return this.activeSlideNo!==1},n.prototype.getImageSrc=function(e){return e.imageLoaded?e.image.src:this.slides[0].image.src},n.prototype.setVisibleSlideImage=function(){var e=function(){var e=this.slides[this.activeSlideNo-1],t=this.getImageSrc(e),n;this.imageNode=this.getVisibleImageNode(),t===this.imageNode.src?(n=new Image,this.setImageDimensions(n)):(this.imageNode.src=t,this.setImageDimensionsAfterLoad()),this.baseImageNode.src=e.getSrcToLoad("resp"),this.baseImageNode.setAttribute("data-src-s",e.getSrcToLoad("resp-s")),this.baseImageNode.setAttribute("data-src-t",e.getSrcToLoad("resp-t")),this.baseImageNode.setAttribute("data-src-d",e.getSrcToLoad("resp-d")),this.imageNode.alt=e.imageValues.alt}.bind(this);setTimeout(e,100)},n.prototype.setImageDimensionsAfterLoad=function(){var e=new Image;e.onload=function(e){this.setImageDimensions(e)}.bind(this,e),e.src=this.imageNode.src},n.prototype.setImageDimensions=function(e){var t=e.height,n=e.width,r=this.getImageWidth(),i=r/n*t;this.imageNode.width=r,this.imageNode.height=i},n.prototype.getImageWidth=function(){var e;return t.isMobile()?e=592:t.isTablet()?e=1008:t.isDesktop()?e=640:e=320,e},n.prototype.getVisibleImageNode=function(){var e=this.node.querySelectorAll(".c-rg-ss-slide img"),t=[].filter.call(e,function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("display");return n!=="none"});return t[0]},n.prototype.refreshCachedImages=function(){var e=this.getResponsiveClassToCache();this.slides.forEach(function(t){t.preloadImage(e)}),this.imageResponsiveClassCached=e},n.prototype.setNavigationArrowsPosition=function(){var e=this.node,n=e.querySelector(".c-rg-ss-next"),r=e.querySelector(".c-rg-ss-previous"),i=e.querySelector(".c-rg-ss-body"),s=e.querySelector(".c-rg-ss-slide-container");t.isMobile()?(i.appendChild(r),i.appendChild(n)):(s.appendChild(r),s.appendChild(n))},n.prototype.setNavigationArrowsAppearance=function(){var e;t.removeClass(this.prevArrow,"k-is-active"),t.removeClass(this.prevArrow,"k-is-disabled"),t.removeClass(this.nextArrow,"k-is-active"),t.removeClass(this.nextArrow,"k-is-disabled"),e=this.hasPreviousSlide()?"k-is-active":"k-is-disabled",t.addClass(this.prevArrow,e),e=this.hasNextSlide()?"k-is-active":"k-is-disabled",t.addClass(this.nextArrow,e)},n}),define("slideshow-controller",["slideshow"],function(e){"use strict";var t=function(t,n){var r=document.querySelector(t);this.slideshow=new e(r,n),this.slideshow.validate()&&this.slideshow.start()};return t}),define("education",["kandlcommon/common","glossaryTerms","glossary","miniaudio-controller","study-guide-navigation","qa","media-controller","learning-content","source-code-format","kandlcommon/responsiveImage","slideshow-controller"],function(e,t,n,r,i,s,o,u,a,f,l){"use strict";var c={init:function(){var c=".c-studyguide-navigation.studyguide--container__fixed",h=document.querySelectorAll(".slideshow__container"),p=0,d=document.querySelectorAll(".image--responsive");if(e.cutsMustard()){t.init(document),n.init(),r.init(document),s.init(document),document.querySelector(c)&&i.init(document.querySelector(".c-studyguide-navigation"),"c-studyguide-navigation--static",document.querySelector(".chapter-step"),!1),document.querySelector(".chapter-step-container")&&a.init(),u.init();for(p=0;p<h.length;p++)new l("#"+h[p].id,{credit:h[p].getAttribute("data-credit-translation")})}o.init(document);for(var v=0;v<d.length;v++){var m={recipe:d[v].getAttribute("data-image-recipe-url"),container:d[v].parentNode,sizes:{400:"320x180",600:"656x369",800:"800x450"}},g=new f(d[v],m);g.init()}}};return c});